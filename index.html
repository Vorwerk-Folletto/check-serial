<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <link rel="manifest" href="manifest.json?v=3">
  <title>Folletto Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Anti-cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
      --g1:#25d366;
      --g2:#1ebea5;
      --b1:#25788f;
      --bg1:#e9f2f7;
      --bg2:#e2e8ec;
      --card:#ffffff;
      --txt:#102a33;
      --muted:#6a7e86;
      --danger:#c91818;
    }
    *{ -webkit-tap-highlight-color: transparent; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);
      min-height: 100vh;
      margin: 0;
      text-align: center;
      color: var(--txt);
    }

    /* PASSWORD */
    #passwordOverlay{
      position: fixed; inset: 0;
      background: linear-gradient(160deg, #e8fdf3, #d1f5ea);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #passwordBox{
      background: #fff;
      padding: 28px 22px;
      border-radius: 18px;
      box-shadow: 0 12px 48px rgba(0,0,0,0.16);
      width: min(380px, calc(100vw - 40px));
    }
    #passwordBox h2 { color:#138a4b; margin-bottom:14px; }

    .pwdRow{
      display:flex; gap:10px; margin-bottom:8px;
    }
    #passwordInput{
      width:100%;
      padding:12px;
      font-size:18px;
      border-radius:10px;
      border:1.5px solid #bde4cf;
      text-align:center;
    }
    #togglePwd{
      width:54px;
      border-radius:10px;
      border:0;
      background: linear-gradient(90deg,#25788f,#3e9ab0);
      color:#fff;
      font-weight:900;
    }
    .btnMain{
      width:100%;
      padding:13px 0;
      border:0;
      border-radius:10px;
      font-size:20px;
      font-weight:900;
      color:#fff;
      background: linear-gradient(90deg,var(--g1),var(--g2));
      margin-top:10px;
    }
    #passwordError{color:var(--danger);display:none;font-weight:900;margin-top:10px;}

    /* MENU */
    .wrap{
      max-width:720px;
      margin:0 auto;
      padding:26px 14px;
      display:none;
    }
    .topLogo img{width:110px;}
    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
      margin-top:20px;
    }
    .cardBtn{
      border-radius:18px;
      padding:18px;
      border:0;
      background:#fff;
      box-shadow:0 18px 60px rgba(0,0,0,.08);
      text-align:left;
    }
    @media(max-width:560px){
      .grid{grid-template-columns:1fr;}
    }
  </style>
</head>

<body>

<!-- PASSWORD -->
<div id="passwordOverlay">
  <div id="passwordBox">
    <h2>Accesso riservato</h2>

    <div class="pwdRow">
      <input type="password" id="passwordInput" placeholder="Inserisci password">
      <button id="togglePwd" onclick="togglePassword()">üëÅ</button>
    </div>

    <button class="btnMain" onclick="checkPassword()">Entra</button>

    <!-- ‚úÖ RICORDA PASSWORD -->
    <div style="margin-top:12px;display:flex;justify-content:center;gap:8px;font-weight:900;font-size:14px;color:#6a7e86;">
      <input type="checkbox" id="rememberMe">
      <label for="rememberMe">Ricorda password</label>
    </div>

    <div id="passwordError">Password errata ‚ö†Ô∏è</div>
  </div>
</div>

<!-- MENU -->
<div class="wrap" id="menu">
  <div class="topLogo">
    <img src="IMG_3780.jpeg">
  </div>

  <h1>Folletto Tool</h1>

  <div class="grid">
    <button class="cardBtn" onclick="goSerial()">üîç Serial Check</button>
    <button class="cardBtn" onclick="goAttivita()">üìã Attivit√†</button>
  </div>

  <button class="btnMain" style="margin-top:20px;background:#111" onclick="logout()">Esci</button>
</div>

<script>
  const ACCESS_PASSWORD = "1232";
  const AUTH_KEY = "auth_ok";
  const REMEMBER_KEY = "folletto_remember";

  function togglePassword(){
    const i=document.getElementById("passwordInput");
    i.type=i.type==="password"?"text":"password";
  }

  function checkPassword(){
    const v=document.getElementById("passwordInput").value;
    if(v===ACCESS_PASSWORD){
      localStorage.setItem(AUTH_KEY,"1");
      if(document.getElementById("rememberMe").checked){
        localStorage.setItem(REMEMBER_KEY,"1");
      }
      showMenu();
    }else{
      document.getElementById("passwordError").style.display="block";
      setTimeout(()=>document.getElementById("passwordError").style.display="none",2000);
    }
  }

  function showMenu(){
    document.getElementById("passwordOverlay").style.display="none";
    document.getElementById("menu").style.display="block";
  }

  function logout(){
    localStorage.removeItem(AUTH_KEY);
    localStorage.removeItem(REMEMBER_KEY);
    location.reload();
  }

  function goSerial(){ location.href="serial.html?v=3"; }
  function goAttivita(){ location.href="attivita.html?v=3"; }

  // AUTO LOGIN
  if(localStorage.getItem(AUTH_KEY)==="1" && localStorage.getItem(REMEMBER_KEY)==="1"){
    window.addEventListener("load",showMenu);
  }
</script>

</body>
</html>